async function refreshStatus() {
  try {
    const res = await fetch("/status");
    const data = await res.json();

    const allOn = data.kasa && data.tuya1 && data.tuya2;

    powerBtn.classList.toggle("on", allOn);
    powerBtn.textContent = allOn ? "ON" : "OFF";

    switchStatus.textContent = `Status: ${allOn ? "ON" : "OFF"}`;
    switchStatus.className = `status ${allOn ? "on" : "off"}`;

    systemStatus.textContent = "Status Synced ✅";
  } catch {
    systemStatus.textContent = "Status Error ❌";
  }
}

// Auto refresh on load
refreshStatus();
